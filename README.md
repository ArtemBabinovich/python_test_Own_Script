# Фонарь (тестовое задание)

Реализация фонаря должна удовлетворять следующим требованиям:
1. При запуске фонарь должен запрашивать хост:порт (по умолчанию
127.0.0.1:9999), подсоединяться по TCP и после этого начать
отрабатывать протокол управления.
2. При получении данных от сервера фонарь проверяет команду,
и, если она известна, обрабатывает команду, иначе молча ее игнорирует.
3. При получении команды ON фонарь включается (отрисовку
фонаря оставляем на ваше усмотрение).
4. При получении команды OFF фонарь выключается.
5. При получении команды COLOR фонарь меняет цвет.
6. При завершении работы фонарь корректно закрывает соединение
с сервером.
7. Реализация фонаря позволяет легко добавлять любые новые команды.


**Реализован:**
1. Версия `Python - 3.10`
2. Реализация сетевого протокола с помощью библиотеки `aiohttp`

**Для запуска:**
1. Скопируйте репозиторий.
2. Убедитесь что у вас установленна актуальная версия Python
3. Установите виртуальное окружение.
4. Установите необходимые зависимости из requirements.txt
 команда `pip install -r requirements.txt `
5. Перейдите в каталог _my_lamp_, где находится файл с кодом
6. В командной строке наберите команду `python lamp.py`
7. Если сервер работает, программа будет ожидать команды иначе выведет ошибку.


**Описание модуля:**

Модуль содержит класс `Lamp`

Класс `Lamp` представляет собой реализацию управляемого по сети фонаря, 
который работает по протоколу ПУФ (Протокол Управления Фонарем) через соединение TCP. 
Класс содержит следующие функции:

* `__init__(self, host: str = "127.0.0.1", port: int = 9999, color: str = "white")`: 
конструктор класса, который инициализирует объект `Lamp`. В качестве параметров принимает:
- `host` - строку с адресом сервера, по умолчанию равен 127.0.0.1;
- `port` - целое число с портом сервера, по умолчанию равен 9999;
- `color` - строку с цветом фонаря, по умолчанию равен white.

* `connect(self) -> bool`: функция для установления соединения с сервером. 
Возвращает True в случае успешного подключения и False в случае ошибки подключения.

* `handle_command(self, command: str, metadata: Optional[float] = None) -> None`: 
функция для обработки команды, принятой от сервера. Принимает в качестве параметров:
- `command` - строку с командой, которую нужно обработать;
- `metadata` - дополнительную информацию, если команда это требует. По умолчанию равен None. 
В нашем случае, это параметр не используется.

* `run(self) -> None`: функция, запускающая обработку команд фонаря от сервера.
Бесконечно ожидает новые команды от сервера и передает их на обработку.

* `disconnect(self) -> None`: функция для корректного закрытия соединения с сервером.

Класс `Lamp` также содержит другие вспомогательные функции и переменные,
которые используются в процессе работы фонаря, такие как переменные для хранения текущего 
состояния фонаря (вкл/выкл), цвета фонаря и т.д.


## **Тестовое задание по базам данных**
1. Перейдите в папку с названием `db`
2. Откройте файл с названием `test_design_db`